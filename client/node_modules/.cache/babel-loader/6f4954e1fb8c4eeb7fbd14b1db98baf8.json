{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Shivani/Downloads/React/trailflix-master/trailflix-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Shivani/Downloads/React/trailflix-master/trailflix-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Shivani/Downloads/React/trailflix-master/trailflix-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import MovieList from\"../../api/MovieList\";import{UserContext}from\"../../context/UserContext\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserLogin(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),passwd=_useState4[0],setPasswd=_useState4[1];var _useContext=useContext(UserContext),users=_useContext.users,setUsers=_useContext.setUsers;var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isError=_useState6[0],setIsError=_useState6[1];var nav=useNavigate();var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// Prevent form from submitting/reloading\n_context.prev=1;_context.next=4;return MovieList.get(\"/login-user/\".concat(email),{withCredentials:true});case 4:response=_context.sent;console.log(response);setUsers(response);alert(\"Login successful!\");nav(\"/\");_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);console.log(_context.t0.message);// Log any error from backend\nalert(\"Login failed. Please try again.\");case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex w-full min-h-screen justify-center items-center py-12 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{className:\"mx-auto h-12 w-auto\",src:\"https://img.icons8.com/external-flaticons-lineal-color-flat-icons/64/undefined/external-movie-movie-theater-flaticons-lineal-color-flat-icons-7.png\",alt:\"Workflow\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-center text-3xl font-extrabold text-gray-900\",children:\"Sign in to your account\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-center text-sm text-gray-600\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-8 space-y-6\",action:\"#\",method:\"POST\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"remember\",defaultValue:\"true\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-md shadow-sm -space-y-px\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"sr-only\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",type:\"email\",autoComplete:\"email\",value:email,onChange:function onChange(e){setEmail(e.target.value);},required:true,className:\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\",placeholder:\"Email address\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"passwd\",className:\"sr-only\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"passwd\",name:\"passwd\",type:\"password\",value:passwd,onChange:function onChange(e){setPasswd(e.target.value);},autoComplete:\"passwd\",required:true,className:\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\",placeholder:\"Password\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"remember-me\",name:\"remember-me\",type:\"checkbox\",className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"remember-me\",className:\"ml-2 block text-sm text-gray-900\",children:\"Remember me\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"font-medium text-indigo-600 hover:text-indigo-500\",children:\"Forgot your password?\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,type:\"submit\",className:\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",children:\"Sign in\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-10\"}),isError&&/*#__PURE__*/_jsxs(\"div\",{class:\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"font-bold\",children:\"Password\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Incorrect Password! Try again!\"})]})]})]})]})})});}","map":{"version":3,"names":["React","useState","useEffect","useContext","MovieList","UserContext","useNavigate","UserLogin","email","setEmail","passwd","setPasswd","users","setUsers","isError","setIsError","nav","handleLogin","e","preventDefault","get","withCredentials","response","console","log","alert","message","target","value"],"sources":["C:/Users/Shivani/Downloads/React/trailflix-master/trailflix-master/client/src/components/Users/UserLogin.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport MovieList from \"../../api/MovieList\";\nimport { UserContext } from \"../../context/UserContext\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function UserLogin() {\n  const [email, setEmail] = useState();\n  const [passwd, setPasswd] = useState();\n  const { users, setUsers } = useContext(UserContext);\n\n  const [isError, setIsError] = useState(false);\n  const nav = useNavigate();\n\n  const handleLogin = async (e) => {\n    e.preventDefault(); // Prevent form from submitting/reloading\n\n    try {\n      const response = await MovieList.get(`/login-user/${email}`, {\n        withCredentials: true,\n      });\n      console.log(response);\n\n      setUsers(response);\n      alert(\"Login successful!\");\n      nav(\"/\");\n    } catch (err) {\n      console.log(err.message); // Log any error from backend\n      alert(\"Login failed. Please try again.\");\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"flex w-full min-h-screen justify-center items-center py-12 px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-md w-full space-y-8\">\n          <div>\n            <img\n              className=\"mx-auto h-12 w-auto\"\n              src=\"https://img.icons8.com/external-flaticons-lineal-color-flat-icons/64/undefined/external-movie-movie-theater-flaticons-lineal-color-flat-icons-7.png\"\n              alt=\"Workflow\"\n            />\n            <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n              Sign in to your account\n            </h2>\n            <p className=\"mt-2 text-center text-sm text-gray-600\"></p>\n          </div>\n          <form className=\"mt-8 space-y-6\" action=\"#\" method=\"POST\">\n            <input type=\"hidden\" name=\"remember\" defaultValue=\"true\" />\n            <div className=\"rounded-md shadow-sm -space-y-px\">\n              <div>\n                <label htmlFor=\"email\" className=\"sr-only\">\n                  Email address\n                </label>\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  value={email}\n                  onChange={(e) => {\n                    setEmail(e.target.value);\n                  }}\n                  required\n                  className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\n                  placeholder=\"Email address\"\n                />\n              </div>\n              <div>\n                <label htmlFor=\"passwd\" className=\"sr-only\">\n                  Password\n                </label>\n                <input\n                  id=\"passwd\"\n                  name=\"passwd\"\n                  type=\"password\"\n                  value={passwd}\n                  onChange={(e) => {\n                    setPasswd(e.target.value);\n                  }}\n                  autoComplete=\"passwd\"\n                  required\n                  className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\n                  placeholder=\"Password\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center\">\n                <input\n                  id=\"remember-me\"\n                  name=\"remember-me\"\n                  type=\"checkbox\"\n                  className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                />\n                <label\n                  htmlFor=\"remember-me\"\n                  className=\"ml-2 block text-sm text-gray-900\"\n                >\n                  Remember me\n                </label>\n              </div>\n\n              <div className=\"text-sm\">\n                <a\n                  href=\"#\"\n                  className=\"font-medium text-indigo-600 hover:text-indigo-500\"\n                >\n                  Forgot your password?\n                </a>\n              </div>\n            </div>\n\n            <div>\n              <button\n                onClick={handleLogin}\n                type=\"submit\"\n                className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n              >\n                Sign in\n              </button>\n              <div className=\"mt-10\"></div>\n              {isError && (\n                <div\n                  class=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4\"\n                  role=\"alert\"\n                >\n                  <p class=\"font-bold\">Password</p>\n                  <p>Incorrect Password! Try again!</p>\n                </div>\n              )}\n              {/* {(\n                <div\n                  class=\"bg-green-100 border-l-4 border-green-500 text-green-700 p-4\"\n                  role=\"alert\"\n                >\n                  <p class=\"font-bold\">You have logged in</p>\n                </div>\n              )} */}\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}